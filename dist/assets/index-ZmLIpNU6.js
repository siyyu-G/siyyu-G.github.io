import{H as S,d as K,c as g,C as O,e as n,v as b,w as t,o as m,g as e,h as i,I as z,i as B,k as o,t as y,f as N,q as V,F as h,J as v}from"./index-Drv990fL.js";const Q=(u,r)=>S.get(`/admin/product/list/${u}/${r}`),W=u=>S.get("/admin/product/onSale/"+u),X=u=>S.get("/admin/product/cancelSale/"+u),Y=u=>S.get("/admin/product/getSkuInfo/"+u),Z=u=>S.delete("/admin/product/deleteSku/"+u),ee=["src"],le=K({__name:"index",setup(u){let r=g(1),x=g(10),D=g(0),C=g([]),k=g(!1),d=g({});O(()=>{_()});const _=async(p=1)=>{r.value=p;let l=await Q(r.value,x.value);l.code===200&&(D.value=l.data.total,C.value=l.data.records)},L=()=>{_()},$=async p=>{p.isSale===1?(await X(p.id),v({type:"success",message:"下架成功"}),_()):(await W(p.id),v({type:"success",message:"上架成功"}),_())},A=()=>{v({type:"success",message:"程序员在努力的更新中..."})},U=async p=>{k.value=!0;let l=await Y(p.id);d.value=l.data},E=async p=>{(await Z(p)).code===200?(v({type:"success",message:"删除成功"}),_(C.value.length>1?r.value:r.value-1)):v({type:"error",message:"删除失败"})};return(p,l)=>{const c=n("el-table-column"),F=n("el-image"),w=n("el-button"),H=n("el-popconfirm"),M=n("el-table"),R=n("el-pagination"),s=n("el-col"),f=n("el-row"),q=n("el-tag"),T=n("el-carousel-item"),j=n("el-carousel"),J=n("el-drawer"),P=n("el-card");return m(),b(P,null,{default:t(()=>[e(M,{data:i(C),border:"",style:{margin:"10px 0px"}},{default:t(()=>[e(c,{label:"序号",type:"index",width:"80px",align:"center"}),e(c,{label:"名称",prop:"skuName","show-overflow-tooltip":"",width:"200px"}),e(c,{label:"描述",prop:"skuDesc","show-overflow-tooltip":"",width:"200px"}),e(c,{label:"默认图片",width:"200px"},{default:t(({row:a,$index:G})=>[e(F,{style:{width:"100px",height:"100px"},src:a.skuDefaultImg},null,8,["src"])]),_:1}),e(c,{label:"重量",prop:"weight",width:"150px"}),e(c,{label:"价格（元）",prop:"price",width:"150px"}),e(c,{label:"操作",width:"300px",fixed:"right"},{default:t(({row:a,$index:G})=>[e(w,{type:"primary",size:"small",icon:a.isSale===1?"Bottom":"Top",onClick:I=>$(a)},null,8,["icon","onClick"]),e(w,{type:"primary",size:"small",icon:"Edit",onClick:A}),e(w,{type:"info",size:"small",icon:"InfoFilled",onClick:I=>U(a)},null,8,["onClick"]),e(H,{title:`你确定要删除${a.skuName}吗？`,width:"200px",onConfirm:I=>E(a.id)},{reference:t(()=>[e(w,{type:"danger",size:"small",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(R,{"current-page":i(r),"onUpdate:currentPage":l[0]||(l[0]=a=>z(r)?r.value=a:r=a),"page-size":i(x),"onUpdate:pageSize":l[1]||(l[1]=a=>z(x)?x.value=a:x=a),"page-sizes":[10,20,30,40],background:!0,layout:"prev, pager, next, jumper,->,sizes,total ",total:400,onSizeChange:L,onCurrentChange:_},null,8,["current-page","page-size"]),e(J,{modelValue:i(k),"onUpdate:modelValue":l[2]||(l[2]=a=>z(k)?k.value=a:k=a)},{header:t(()=>l[3]||(l[3]=[B("h4",null,"查看商品的详情",-1)])),default:t(()=>[e(f,{style:{margin:"20px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[4]||(l[4]=[o("名称")])),_:1}),e(s,{span:18},{default:t(()=>[o(y(i(d).skuName),1)]),_:1})]),_:1}),e(f,{style:{margin:"20px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[5]||(l[5]=[o("描述")])),_:1}),e(s,{span:18},{default:t(()=>[o(y(i(d).skuDesc),1)]),_:1})]),_:1}),e(f,{style:{margin:"20px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[6]||(l[6]=[o("价格")])),_:1}),e(s,{span:18},{default:t(()=>[o(y(i(d).price),1)]),_:1})]),_:1}),e(f,{style:{margin:"20px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[7]||(l[7]=[o("平台属性")])),_:1}),e(s,{span:18},{default:t(()=>[(m(!0),N(h,null,V(i(d).skuAttrValueList,a=>(m(),b(q,{type:"success",style:{margin:"5px"},key:a.id},{default:t(()=>[o(y(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"20px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[8]||(l[8]=[o("销售属性")])),_:1}),e(s,{span:18},{default:t(()=>[(m(!0),N(h,null,V(i(d).skuSaleAttrValueList,a=>(m(),b(q,{type:"success",style:{margin:"5px"},key:a.id},{default:t(()=>[o(y(a.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"20px 0px"}},{default:t(()=>[e(s,{span:6},{default:t(()=>l[9]||(l[9]=[o("商品图片")])),_:1}),e(s,{span:18},{default:t(()=>[e(j,{interval:4e3,type:"card",height:"200px"},{default:t(()=>[(m(!0),N(h,null,V(i(d).skuImageList,a=>(m(),b(T,{key:a.id},{default:t(()=>[B("img",{src:a.imgUrl,alt:""},null,8,ee)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{le as default};
